(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{377:function(e,t,n){"use strict";n.r(t);var r=n(324),i=n(331),a=n.n(i),s=n(355),o=n(353);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.PARAMS=t,this.rt=this.returnRenderTargets(),this.cameras=this.returnCameras(),this.cameras.edges.position.z=this.cameras.normals.position.z=30,this.scenes=this.returnScenes(),this.createMeshes(),this.scenes.edges.add(this.meshes.edges),this.scenes.normals.add(this.meshes.normals)}var t,n,i;return t=e,(n=[{key:"createMeshes",value:function(){var e=new r.G(10,2),t=e.clone(),n=this.returnEdgesMaterial(),i=this.returnNormalsMaterial(),a=this.returnBarycentricData(e.attributes.position.array);e.addAttribute("barycentric",new r.j(a,3)),this.meshes={edges:new r.p(e,n),normals:new r.p(t,i)}}},{key:"returnBarycentricData",value:function(e){for(var t=[],n=0,r=0;r<e.length;r+=3)n%3==0?t.push(1,0,0):n%3==1?t.push(0,1,0):n%3==2&&t.push(0,0,1),n++;return t}},{key:"returnNormalsMaterial",value:function(){return new r.F({uniforms:{},vertexShader:a()("#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vBC;\n\nvoid main() {\n    vUv = uv;\n    vNormal = normalMatrix * normalize(normal);\n\n    gl_Position =   projectionMatrix *\n                    modelViewMatrix *\n                    vec4(position,1.0);\n} "),fragmentShader:a()("#define GLSLIFY 1\nvarying vec2 vUv;\nvarying mediump vec3 vNormal;\n\nvoid main() {\n    vec3 view_nv = normalize(vNormal);\n    vec3 nv_color = view_nv * 0.5 + 0.5;\n\n    gl_FragColor = vec4(nv_color, 1.0);\n}")})}},{key:"returnEdgesMaterial",value:function(){return new r.F({uniforms:{u_edgesThickness:{type:"f",value:this.PARAMS.edgesThickness}},vertexShader:a()("#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vBC;\n\nattribute vec3 barycentric;\n\nvoid main() {\n    vUv = uv;\n    vBC = barycentric;\n\n    gl_Position =   projectionMatrix *\n                    modelViewMatrix *\n                    vec4(position,1.0);\n}"),fragmentShader:a()("#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vBC;\n\nuniform float u_edgesThickness;\n\nvoid main() {\n    float color = pow(distance(vec3(0.33), vBC), u_edgesThickness);\n    vec3 white = vec3(1.0, 1.0, 1.0);\n    // x * y * z = 0 if any of the components is 0\n    float line = 1.0 - smoothstep(0.0, 0.005, vBC.x * vBC.y * vBC.z);\n    vec3 finalColor = mix(vec3(color), white, line);\n    gl_FragColor = vec4(finalColor, 1.0);\n}")})}},{key:"returnScenes",value:function(){return{edges:new r.E,normals:new r.E}}},{key:"returnRenderTargets",value:function(){return{edges:new r.N(window.innerWidth,window.innerHeight),normals:new r.N(window.innerWidth,window.innerHeight)}}},{key:"returnCameras",value:function(){return{edges:new r.w(50,window.innerWidth/window.innerHeight,.01,100),normals:new r.w(50,window.innerWidth/window.innerHeight,.01,100)}}}])&&l(t.prototype,n),i&&l(t,i),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.geometry=this.returnRenderTriGeometry(),this.resolution=new r.K,this.renderer.getDrawingBufferSize(this.resolution),this.rt=new r.N(this.resolution.x,this.resolution.y,{format:r.B,stencilBuffer:!1,depthBuffer:!0}),this.setupMaterial(a,n,i),this.mesh=new r.p(this.geometry,this.material),this.mesh.frustumCulled=!1}var t,n,i;return t=e,(n=[{key:"setupMaterial",value:function(e,t,n){this.fragmentShader=t||"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D uScene;\nuniform vec2 uResolution;\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / uResolution.xy;\n    vec3 color = vec3(uv, 1.0);\n    color = texture2D(uScene, uv).rgb;\n\n    // Do your cool postprocessing here\n    color.r += sin(uv.x * 50.0);\n\n    gl_FragColor = vec4(color, 1.0);\n}",this.vertexShader=n||"precision highp float;\n#define GLSLIFY 1\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    // Look ma! no projection matrix multiplication,\n    // because we pass the values directly in clip space coordinates.\n    gl_Position = vec4(position, 1.0, 1.0);\n}",this.uniforms=e||this.returnDefaultUniforms(),this.material=new r.C({uniforms:this.uniforms,fragmentShader:a()(this.fragmentShader),vertexShader:a()(this.vertexShader)})}},{key:"returnDefaultUniforms",value:function(){return{uScene:{value:this.rt.texture},uResolution:{value:this.resolution}}}},{key:"returnRenderTriGeometry",value:function(){var e=new r.c,t=new Float32Array([-1,-1,3,-1,-1,3]),n=new Float32Array([0,0,2,0,0,2]);return e.addAttribute("position",new r.b(t,2)),e.addAttribute("uv",new r.b(n,2)),e}}])&&u(t.prototype,n),i&&u(t,i),e}();n(354);function d(e,t,n,r,i,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n,r,i){return(e-t)/(n-t)*(i-r)+r}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.init()}var t,n,i,a,l;return t=e,(n=[{key:"init",value:(a=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.PARAMS={edgesThickness:3.26,edgesRenderStrength:15,chromaticAberrMod:.22,pointLightColor:"#fff0ff",pointLightIntensity:1,pointLightDistance:500,pointLightDecay:1},this.initThree(),this.initParticlesRenderTarget(),this.initObjects(),this.initLights(),this.initControls(),this.mainCrystal=new c(this.PARAMS),this.initMouseListener(),this.resize(),this.initParticlesBlurTri(),this.initCrystalRenderTri();case 11:case"end":return e.stop()}}),e,this)})),l=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=a.apply(e,t);function s(e){d(i,n,r,s,o,"next",e)}function o(e){d(i,n,r,s,o,"throw",e)}s(void 0)}))},function(){return l.apply(this,arguments)})},{key:"initMouseListener",value:function(){var e=this;this.mouse=new r.K,this.renderer.domElement.addEventListener("mousemove",(function(t){e.mouse.x=t.clientX/window.innerWidth*2-1,e.mouse.y=-t.clientY/window.innerHeight*2+1}))}},{key:"initParticlesBlurTri",value:function(){this.resolution=new r.K,this.renderer.getDrawingBufferSize(this.resolution);var e={bgTexture:{value:this.particlesRt.texture},uResolution:{value:this.resolution}};this.particlesBlurTri=new h(this.renderer,"precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D bgTexture;\nuniform vec2 uResolution;\n\nvarying vec2 vUv;\n\nvec3 tex(vec2 uv);\n\nhighp float random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\n#ifndef TAU\n  #define TAU 6.28318530718\n#endif\n\n//Use last part of hash function to generate new random radius and angle\nvec2 mult(inout vec2 r) {\n  r = fract(r * vec2(12.9898,78.233));\n  return sqrt(r.x + .001) * vec2(sin(r.y * TAU), cos(r.y * TAU));\n}\n\nvec3 blur(vec2 uv, float radius, float aspect, float offset) {\n  vec2 circle = vec2(radius);\n  circle.x *= aspect;\n  vec2 rnd = vec2(random(vec2(uv + offset)));\n\n  vec3 acc = vec3(0.0);\n  for (int i = 0; i < 20; i++) {\n    acc += tex(uv + circle * mult(rnd)).xyz;\n  }\n  return acc / float(20);\n}\n\nvec3 blur(vec2 uv, float radius, float aspect) {\n  return blur(uv, radius, aspect, 0.0);\n}\n\nvec3 blur(vec2 uv, float radius) {\n  return blur(uv, radius, 1.0);\n}\n\nvec3 tex(vec2 uv) {\n  return texture2D(bgTexture, uv).rgb;\n}\n\nvoid main() {\n    vec4 bgColor = texture2D(bgTexture, vUv);\n\n    float aspect = uResolution.x / uResolution.y;\n\n    vec4 blurColor = vec4(blur(vUv, 0.01, aspect), 1.0);\n    gl_FragColor = vec4(bgColor + blurColor);\n}   ",null,e),this.particlesBlurTri.scene=new r.E,this.particlesBlurTri.camera=new r.v,this.particlesBlurTri.uniforms=e,this.particlesBlurTri.scene.add(this.particlesBlurTri.mesh)}},{key:"initCrystalRenderTri",value:function(){this.crystalRenderTri=new h(this.renderer,"precision mediump float;\n#define GLSLIFY 1\n#define sat(x) clamp(x, 0.0, 1.0);\n\nuniform sampler2D bgTexture;\nuniform sampler2D blurBgTexture;\nuniform sampler2D normalsTexture;\nuniform sampler2D edgesTexture;\nuniform float edgesRenderStrength;\nuniform float chromaticAberrMod;\n\nvarying vec2 vUv;\n\nfloat remap01(float a, float b, float t) {\n    return sat((t - a) / (b - a));\n}\n\nfloat remap(float a, float b, float c, float d, float t) {\n        return remap01(a, b, t) * (d - c) + c;\n}\n\nvoid main() {\n    vec4 bgColor = texture2D(bgTexture, vUv);\n    vec4 blurBgColor = texture2D(blurBgTexture, vUv);\n    vec4 normalColor = texture2D(normalsTexture, vUv);\n    vec4 edgesColor = texture2D(edgesTexture, vUv);\n    vec3 normal = normalize(normalColor.rgb * 2.0 - 1.0);\n\n    // remap edges color\n    float edgeVal = remap(0.0, 1.0, 0.0, 0.7, edgesColor.r);\n\n    vec3 refractVec1 = refract(vec3(0.0, 0.0, 1.0), normal, chromaticAberrMod);\n    vec3 refractVec2 = refract(vec3(0.05, 0.0, 1.0), normal, chromaticAberrMod);\n    vec3 refractVec3 = refract(vec3(-0.05, 0.0, 1.0), normal, chromaticAberrMod);\n    vec4 refractColor1 = texture2D(blurBgTexture, vUv + (refractVec1.xy * edgeVal));\n    vec4 refractColor2 = texture2D(blurBgTexture, vUv + (refractVec2.xy * edgeVal));\n    vec4 refractColor3 = texture2D(blurBgTexture, vUv + (refractVec3.xy * edgeVal));\n\n    vec4 chromAberrColor = vec4(refractColor1.r, refractColor2.g, refractColor3.b, 1.0);\n\n    vec3 refractVec = refract(vec3(0.0, 0.0, 1.0), normal, 0.0);\n    vec4 refractColor = texture2D(blurBgTexture, vUv + (refractVec.xy * edgesColor.r));\n\n    vec4 color = refractColor;\n\n    // mix in chromatic aberration colors\n    color = mix(refractColor, chromAberrColor, edgesColor.r);\n\n    // mix in the edges color white\n    color = mix(color, edgesColor, edgesColor.r / edgesRenderStrength);\n\n    gl_FragColor = vec4(color);\n}","precision highp float;\n#define GLSLIFY 1\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    // Look ma! no projection matrix multiplication,\n    // because we pass the values directly in clip space coordinates.\n    gl_Position = vec4(position, 1.0, 1.0);\n}",this.returnCrystalRenderTriUniforms()),this.scene.add(this.crystalRenderTri.mesh)}},{key:"returnCrystalRenderTriUniforms",value:function(){return{bgTexture:{type:"t",value:this.particlesRt.texture},blurBgTexture:{type:"t",value:this.particlesBlurTri.rt.texture},normalsTexture:{type:"t",value:this.mainCrystal.rt.normals.texture},edgesTexture:{type:"t",value:this.mainCrystal.rt.edges.texture},edgesRenderStrength:{value:this.PARAMS.edgesRenderStrength},chromaticAberrMod:{value:this.PARAMS.chromaticAberrMod},uResolution:{value:this.resolution},uTime:{value:0}}}},{key:"addPaneParams",value:function(){var e=this;this.pane.addInput(this.PARAMS,"edgesThickness",{min:0,max:10}).on("change",(function(t){e.mainCrystal.meshes.edges.material.uniforms.u_edgesThickness.value=t})),this.pane.addInput(this.PARAMS,"edgesRenderStrength",{min:.1,max:24}).on("change",(function(t){e.triMaterial.uniforms.edgesRenderStrength.value=t})),this.pane.addInput(this.PARAMS,"chromaticAberrMod",{min:0,max:10}).on("change",(function(t){e.triMaterial.uniforms.chromaticAberrMod.value=t})),this.pane.addFolder({title:"Point Light"}).addInput(this.PARAMS,"pointLightColor").on("change",(function(t){e.pointLight.color=t}))}},{key:"initThree",value:function(){this.scene=new r.E,this.camera=new r.v,this.renderer=new r.O({antialias:!0,alpha:!0}),this.renderer.autoClear=!0,this.clock=new r.d}},{key:"initParticlesRenderTarget",value:function(){this.particlesRt=new r.N(window.innerWidth,window.innerHeight),this.particlesRtCamera=new r.w(50,window.innerWidth/window.innerHeight,.01,100),this.particlesRtCamera.position.z=30,this.particlesRtScene=new r.E}},{key:"initControls",value:function(){this.trackball=new o.a(this.camera,this.renderer.domElement),this.trackball.rotateSpeed=2,this.trackball.enabled=!0}},{key:"initLights",value:function(){this.pointLight=new r.x(this.PARAMS.pointLightColor,this.PARAMS.pointLightIntensity,this.PARAMS.pointLightDistance,this.PARAMS.pointLightDecay),this.pointLight.position.set(0,0,50),this.particlesRtScene.add(this.pointLight)}},{key:"initObjects",value:function(){this.particleCount=100,this.particles=[];for(var e=0;e<this.particleCount;e++){var t=this.createMesh();this.randomizeTransform(t),this.addAttributes(t),this.particlesRtScene.add(t),this.particles.push(t)}}},{key:"addAttributes",value:function(e){e.speed={rotation:.01*Math.random(),y:.03*Math.random()+.01}}},{key:"randomizeTransform",value:function(e){e.position.x=m(Math.random(),0,1,-30,30),e.position.y=m(Math.random(),0,1,-15,15),e.position.z=m(Math.random(),0,1,-20,10),e.rotation.x=2*Math.random()*Math.PI,e.rotation.y=2*Math.random()*Math.PI,e.rotation.z=2*Math.random()*Math.PI}},{key:"updateParticles",value:function(){for(var e=0;e<this.particleCount;e++){var t=this.particles[e];t.position.y+=t.speed.y,t.rotation.x+=t.speed.rotation,t.rotation.z+=t.speed.rotation,this.checkEdge(t)}}},{key:"checkEdge",value:function(e){e.position.y>15&&(e.position.y=-15)}},{key:"createMesh",value:function(){var e=new r.G(1,0),t=new r.t({roughness:.5,metalness:.3,reflectivity:1,clearcoat:1,color:16777215});return new r.p(e,t)}},{key:"initPostProcessing",value:function(){this.composer=new s.b(this.renderer),this.composer.enabled=!1;var e=new s.d(this.scene,this.camera);e.renderToScreen=!1;var t=new s.a({contrast:1}),n=new s.c(this.camera,t);n.renderToScreen=!0,this.composer.addPass(e),this.composer.addPass(n),this.composer.render(1)}},{key:"resize",value:function(){this.renderer&&(this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.fovHeight=2*Math.tan(this.camera.fov*Math.PI/180/2)*this.camera.position.z,this.fovWidth=this.fovHeight*this.camera.aspect,this.renderer.setSize(window.innerWidth,window.innerHeight),this.trackball&&this.trackball.handleResize())}},{key:"update",value:function(){this.clock.getDelta();var e=5e-4*performance.now();this.triMaterial&&(this.triMaterial.uniforms.uTime.value=e),this.particleCount&&this.updateParticles(),this.trackball&&this.trackball.update()}},{key:"draw",value:function(){console.log(this.mouse.y),this.mainCrystal&&(this.mainCrystal.meshes.edges.rotation.y+=.009*this.mouse.y,this.mainCrystal.meshes.edges.rotation.z+=.009*this.mouse.x,this.mainCrystal.meshes.edges.rotation.x+=.005,this.mainCrystal.meshes.normals.rotation.y+=.009*this.mouse.y,this.mainCrystal.meshes.normals.rotation.z+=.009*this.mouse.x,this.mainCrystal.meshes.normals.rotation.x+=.005,this.renderer.setRenderTarget(this.particlesRt),this.renderer.render(this.particlesRtScene,this.particlesRtCamera),this.renderer.setRenderTarget(null),this.renderer.setRenderTarget(this.particlesBlurTri.rt),this.renderer.render(this.particlesBlurTri.scene,this.particlesBlurTri.camera),this.renderer.setRenderTarget(null),this.renderer.setRenderTarget(this.mainCrystal.rt.edges),this.renderer.render(this.mainCrystal.scenes.edges,this.mainCrystal.cameras.edges),this.renderer.setRenderTarget(null),this.renderer.setRenderTarget(this.mainCrystal.rt.normals),this.renderer.render(this.mainCrystal.scenes.normals,this.mainCrystal.cameras.normals),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera))}}])&&v(t.prototype,n),i&&v(t,i),e}(),g=n(356),p=n.n(g),y=n(376),w=n.n(y);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.postProcessing=!1,this.range=[0,1],this.initControlKit(),this.initStats(),this.disable()}var t,n,r;return t=e,(n=[{key:"initControlKit",value:function(){var e=this;this.controlKit=new p.a,this.controlKit.addPanel({width:300,enable:!0}).addGroup({label:"Post Processing",enable:!0}).addCheckbox(this,"postProcessing",{label:"post processing",onChange:function(){e.onPostProcessingChange()}})}},{key:"initStats",value:function(){this.stats=new w.a,document.body.appendChild(this.stats.dom)}},{key:"enable",value:function(){this.controlKit.enable(),this.stats&&(this.stats.dom.style.display="")}},{key:"disable",value:function(){this.controlKit.disable(),this.stats&&(this.stats.dom.style.display="none")}},{key:"toggle",value:function(){this.controlKit._enabled?this.disable():this.enable()}},{key:"onPostProcessingChange",value:function(){this.app.webgl.composer&&(this.app.webgl.composer.enabled=this.postProcessing)}}])&&b(t.prototype,n),r&&b(t,r),e}();function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"default",(function(){return k}));var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.initWebGL(),this.initGUI(),this.addListeners(),this.animate(),this.resize()}},{key:"initWebGL",value:function(){this.webgl=new f(this),document.querySelector(".container").appendChild(this.webgl.renderer.domElement)}},{key:"initGUI",value:function(){this.gui=new C(this)}},{key:"addListeners",value:function(){this.handlerAnimate=this.animate.bind(this),window.addEventListener("resize",this.resize.bind(this)),window.addEventListener("keyup",this.keyup.bind(this))}},{key:"animate",value:function(){this.update(),this.draw(),this.raf=requestAnimationFrame(this.handlerAnimate)}},{key:"update",value:function(){this.gui.stats&&this.gui.stats.begin(),this.webgl&&this.webgl.update()}},{key:"draw",value:function(){this.webgl&&this.webgl.draw(),this.gui.stats&&this.gui.stats.end()}},{key:"resize",value:function(){this.webgl&&this.webgl.resize()}},{key:"keyup",value:function(e){71==e.keyCode&&this.gui&&this.gui.toggle(),82==e.keyCode&&this.webgl.trackball&&this.webgl.trackball.reset()}}])&&x(t.prototype,n),r&&x(t,r),e}()}}]);